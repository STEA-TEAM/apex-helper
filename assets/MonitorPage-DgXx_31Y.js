import{c as g,a as x,h as v,d as b,g as S,u as D,_ as q,x as a,W as i,Y as y,X as C,a1 as u,ab as B,q as p,r as z,o as V,j as P,y as _,z as f,A as w,af as k}from"./index-DCnRgger.js";import{u as Q,a as T}from"./use-dark-Bz5P0Flx.js";import{Q as W}from"./QPage-BqazhUXs.js";import{u as L}from"./use-quasar-dG9N7qxh.js";import{websocket as c}from"./websocket-B-zW90eC.js";const A=g({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:n}){const o=x(()=>`q-card__section q-card__section--${t.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>v(t.tag,{class:o.value},b(n.default))}}),H=g({name:"QCard",props:{...Q,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:n}){const{proxy:{$q:o}}=S(),r=T(t,o),l=x(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>v(t.tag,{class:l.value},b(n.default))}});var m=(t=>(t.Circle="Circle",t.Line="Line",t.Rectangle="Rectangle",t.Text="Text",t))(m||{});const M=D({__name:"DrawLayer",props:{height:{},modelValue:{},width:{}},setup(t,{expose:n}){n();const{screen:o}=L(),r={screen:o,get DrawType(){return m}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),j=["height","width"],E=["cx","cy","r","fill","fill-opacity","opacity","stroke","stroke-width"],N=["x1","y1","x2","y2","fill","fill-opacity","opacity","stroke","stroke-width"],O=["x","y","width","height","fill","fill-opacity","opacity","stroke","stroke-width"],R=["x","y","font-size","font-family","fill","fill-opacity","opacity","stroke","stroke-width"];function F(t,n,o,r,l,d){return a(),i("svg",{height:o.height??r.screen.height,width:o.width??r.screen.width},[(a(!0),i(y,null,C(o.modelValue,(e,s)=>(a(),i(y,{key:s},[e.type===r.DrawType.Circle?(a(),i("circle",{key:0,cx:e.dimensions.x,cy:e.dimensions.y,r:e.dimensions.radius,fill:e.fill?.color??"transparent","fill-opacity":e.fill?.opacity??1,opacity:e.opacity??1,stroke:e.stroke?.color??"transparent","stroke-width":e.stroke?.width??1},null,8,E)):e.type===r.DrawType.Line?(a(),i("line",{key:1,x1:e.dimensions.x1,y1:e.dimensions.y1,x2:e.dimensions.x2,y2:e.dimensions.y2,fill:e.fill?.color??"transparent","fill-opacity":e.fill?.opacity??1,opacity:e.opacity??1,stroke:e.stroke?.color??"transparent","stroke-width":e.stroke?.width??1},null,8,N)):e.type===r.DrawType.Rectangle?(a(),i("rect",{key:2,x:e.dimensions.x,y:e.dimensions.y,width:e.dimensions.width,height:e.dimensions.height,fill:e.fill?.color??"transparent","fill-opacity":e.fill?.opacity??1,opacity:e.opacity??1,stroke:e.stroke?.color??"transparent","stroke-width":e.stroke?.width??1},null,8,O)):e.type===r.DrawType.Text?(a(),i("text",{key:3,x:e.dimensions.x,y:e.dimensions.y,"font-size":e.font?.size,"font-family":e.font?.family,fill:e.fill?.color??"transparent","fill-opacity":e.fill?.opacity??1,opacity:e.opacity??1,stroke:e.stroke?.color??"transparent","stroke-width":e.stroke?.width??1},u(e.content),9,R)):B("",!0)],64))),128))],8,j)}const I=q(M,[["render",F],["__file","DrawLayer.vue"]]);var h=(t=>(t.Handshake="Handshake",t.LayerDraw="LayerDraw",t))(h||{});const U=D({__name:"MonitorPage",setup(t,{expose:n}){n();const{screen:o}=L(),r=p({}),l=z(""),d=p({height:o.height,width:o.width});c.url="ws://localhost:8080",V(()=>{c.connect(),l.value=window.obsstudio?.pluginVersion??"unknown",c.registerWsAction(h.Handshake,({data:s})=>{s.result==="success"&&(d.height=s.resolution.height,d.width=s.resolution.width)}),c.registerWsAction(h.LayerDraw,({data:s})=>{s.result==="success"&&(r[s.name]=s.elements)})}),P(()=>{c.unregisterWsAction(h.Handshake),c.unregisterWsAction(h.LayerDraw)});const e={screen:o,drawElements:r,obsVersion:l,resolution:d,DrawLayer:I};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),X={class:"text-h4"},Y={class:"text-h4"};function G(t,n,o,r,l,d){return a(),_(W,{class:"flex"},{default:f(()=>[w(H,{class:"bg-transparent",bordered:"",flat:""},{default:f(()=>[w(A,{class:"text-blue",style:{"white-space":"pre"}},{default:f(()=>[k("div",X,"OBS version: "+u(r.obsVersion),1),k("div",Y," Window size: "+u(r.resolution.width)+" x "+u(r.resolution.height),1)]),_:1})]),_:1}),(a(!0),i(y,null,C(r.drawElements,(e,s)=>(a(),_(r.DrawLayer,{key:s,class:"absolute-full",height:r.resolution.height,width:r.resolution.width,"model-value":e},null,8,["height","width","model-value"]))),128))]),_:1})}const te=q(U,[["render",G],["__file","MonitorPage.vue"]]);export{te as default};
