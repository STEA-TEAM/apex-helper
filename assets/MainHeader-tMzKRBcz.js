import{a as o,c as B,r as m,m as U,o as j,h as s,a8 as K,d as V,a9 as W,w as _,aa as N,g as F,i as G,e as L,j as J,F as X,l as Y,u as Z,_ as p,x as ee,y as te,z as k,ab as ae,A as b,ac as I,ad as ne}from"./index-DCnRgger.js";import{u as O}from"./use-timeout-CwnFdXqR.js";import{Q as ie}from"./QResizeObserver-DbD30Cm1.js";import{bus as re}from"./bus-HvrHHNEb.js";const le={ratio:[String,Number]};function oe(e,i){return o(()=>{const l=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const ue=1.7778,se=B({name:"QImg",props:{...le,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ue},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:l}){const u=m(e.initialRatio),n=oe(e,u),g=F(),{registerTimeout:c,removeTimeout:h}=O(),{registerTimeout:T,removeTimeout:w}=O(),q=o(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),Q=o(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),d=[m(null),m(q.value)],r=m(0),f=m(!1),S=m(!1),x=o(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),z=o(()=>({width:e.width,height:e.height})),t=o(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),v=o(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function M(){if(w(),e.loadingShowDelay===0){f.value=!0;return}T(()=>{f.value=!0},e.loadingShowDelay)}function H(){w(),f.value=!1}function D({target:a}){N(g)===!1&&(h(),u.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,$(a,1))}function $(a,y){y===1e3||N(g)===!0||(a.complete===!0?P(a):c(()=>{$(a,y+1)},50))}function P(a){N(g)!==!0&&(r.value=r.value^1,d[r.value].value=null,H(),a.getAttribute("__qerror")!=="true"&&(S.value=!1),l("load",a.currentSrc||a.src))}function A(a){h(),H(),S.value=!0,d[r.value].value=Q.value,d[r.value^1].value=q.value,l("error",a)}function R(a){const y=d[a].value,C={key:"img_"+a,class:t.value,style:v.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...y};return r.value===a?Object.assign(C,{class:C.class+"current",onLoad:D,onError:A}):C.class+="loaded",s("div",{class:"q-img__container absolute-full",key:"img"+a},s("img",C))}function E(){return f.value===!1?s("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},V(i[S.value===!0?"error":"default"])):s("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[s(W,{color:e.spinnerColor,size:e.spinnerSize})])}{let a=function(){_(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,y=>{h(),S.value=!1,y===null?(H(),d[r.value^1].value=q.value):M(),d[r.value].value=y},{immediate:!0})};U.value===!0?j(a):a()}return()=>{const a=[];return n.value!==null&&a.push(s("div",{key:"filler",style:n.value})),d[0].value!==null&&a.push(R(0)),d[1].value!==null&&a.push(R(1)),a.push(s(K,{name:"q-transition--fade"},E)),s("div",{key:"main",class:x.value,style:z.value,role:"img","aria-label":e.alt},a)}}}),ce=B({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:i}){const l=o(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>s("div",{class:l.value},V(i.default))}}),de=B({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:i}){const l=o(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>s("div",{class:l.value,role:"toolbar"},V(i.default))}}),fe=B({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:i,emit:l}){const{proxy:{$q:u}}=F(),n=G(Y,L);if(n===L)return console.error("QHeader needs to be child of QLayout"),L;const g=m(parseInt(e.heightHint,10)),c=m(!0),h=o(()=>e.reveal===!0||n.view.value.indexOf("H")!==-1||u.platform.is.ios&&n.isContainer.value===!0),T=o(()=>{if(e.modelValue!==!0)return 0;if(h.value===!0)return c.value===!0?g.value:0;const t=g.value-n.scroll.value.position;return t>0?t:0}),w=o(()=>e.modelValue!==!0||h.value===!0&&c.value!==!0),q=o(()=>e.modelValue===!0&&w.value===!0&&e.reveal===!0),Q=o(()=>"q-header q-layout__section--marginal "+(h.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(w.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),d=o(()=>{const t=n.rows.value.top,v={};return t[0]==="l"&&n.left.space===!0&&(v[u.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),t[2]==="r"&&n.right.space===!0&&(v[u.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),v});function r(t,v){n.update("header",t,v)}function f(t,v){t.value!==v&&(t.value=v)}function S({height:t}){f(g,t),r("size",t)}function x(t){q.value===!0&&f(c,!0),l("focusin",t)}_(()=>e.modelValue,t=>{r("space",t),f(c,!0),n.animate()}),_(T,t=>{r("offset",t)}),_(()=>e.reveal,t=>{t===!1&&f(c,e.modelValue)}),_(c,t=>{n.animate(),l("reveal",t)}),_(n.scroll,t=>{e.reveal===!0&&f(c,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const z={};return n.instances.header=z,e.modelValue===!0&&r("size",g.value),r("space",e.modelValue),r("offset",T.value),J(()=>{n.instances.header===z&&(n.instances.header=void 0,r("size",0),r("offset",0),r("space",!1))}),()=>{const t=X(i.default,[]);return e.elevated===!0&&t.push(s("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(s(ie,{debounce:0,onResize:S})),s("header",{class:Q.value,style:d.value,onFocusin:x},t)}}}),ve=Z({__name:"MainHeader",setup(e,{expose:i}){i();const l=m();j(()=>{l.value=window.obsstudio});const u={obsstudio:l,get bus(){return re}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});function ge(e,i,l,u,n,g){return u.obsstudio?ae("",!0):(ee(),te(fe,{key:0,bordered:"",class:"bg-primary text-white"},{default:k(()=>[b(de,null,{default:k(()=>[b(I,{dense:"",flat:"",icon:"menu",round:"",onClick:i[0]||(i[0]=c=>u.bus.emit("drawer","toggle","left"))}),b(ce,null,{default:k(()=>[b(ne,null,{default:k(()=>[b(se,{src:"favicon.ico"})]),_:1})]),_:1}),b(I,{dense:"",flat:"",icon:"menu",round:"",onClick:i[1]||(i[1]=c=>u.bus.emit("drawer","toggle","right"))})]),_:1})]),_:1}))}const be=p(ve,[["render",ge],["__file","MainHeader.vue"]]);export{be as default};
